// // // src/components/Cart.jsx
// import React, { useState } from "react";
// import {
//     Box,
//     Typography,
//     Paper,
//     Button,
//     Table,
//     TableBody,
//     TableCell,
//     TableContainer,
//     TableHead,
//     TableRow,
//     IconButton,
//     Snackbar,
//     Alert,
//     Dialog,
//     DialogTitle,
//     DialogContent,
//     DialogActions,
//     Avatar,
//     Divider,
// } from "@mui/material";
// import AddIcon from "@mui/icons-material/Add";
// import RemoveIcon from "@mui/icons-material/Remove";
// import DeleteIcon from "@mui/icons-material/Delete";
// import PriceChangeIcon from "@mui/icons-material/PriceChange";
// import BusinessIcon from "@mui/icons-material/Business";
// import CalculateIcon from "@mui/icons-material/Calculate";
// import { useNavigate } from "react-router-dom";

// // Import Cart Context
// import { useCart } from "../context/CartContext";

// const Cart = () => {
//     // Use Cart Context
//     const {
//         cartItems,
//         updateCartItemQuantity,
//         removeFromCart,
//         clearCart,
//         getTotalItems
//     } = useCart();

//     const navigate = useNavigate();

//     const [notification, setNotification] = useState({
//         open: false,
//         message: "",
//         severity: "success",
//     });

//     const [confirmDialog, setConfirmDialog] = useState({
//         open: false,
//         title: "",
//         message: "",
//         onConfirm: null,
//     });

//     // ๐ เบเบฑเบเบเบฑเบเบเบฑเบเบฎเบนเบเปเบเบเปเบเบดเบเบฅเบฒเบง
//     const formatLaoKip = (amount) => {
//         if (!amount || amount === 0) return '0 เบเบตเบ';
//         const formatted = Number(amount).toLocaleString('en-US');
//         return `${formatted} เบเบตเบ`;
//     };

//     // ๐ เบเบฑเบเบเบฑเบเบเบดเบเปเบฅเปเบฅเบฒเบเบฒเบฅเบงเบกเบเบญเบเปเบเปเบฅเบฐเบฅเบฒเบเบเบฒเบ
//     const calculateItemTotal = (price, quantity) => {
//         return (price || 0) * quantity;
//     };

//     // ๐ เบเบฑเบเบเบฑเบเบเบดเบเปเบฅเปเบฅเบฒเบเบฒเบฅเบงเบกเบเบฑเบเปเบปเบ
//     const calculateGrandTotal = () => {
//         return cartItems.reduce((total, item) => {
//             return total + calculateItemTotal(item.price || 0, item.quantity);
//         }, 0);
//     };

//     // Update quantity
//     const updateQuantity = (id, newQuantity) => {
//         updateCartItemQuantity(id, newQuantity);
//         showNotification("เบญเบฑเบเปเบเบเบเบณเบเบงเบเปเบฅเปเบง", "success");
//     };

//     // Remove item from cart
//     const removeItem = (id) => {
//         const item = cartItems.find((item) => item.id === id);
//         setConfirmDialog({
//             open: true,
//             title: "เบฅเบถเบเบชเบดเบเบเปเบฒ",
//             message: `เบเปเบฒเบเปเบเปเปเบเบเปเปเบงเปเบฒเบเปเบญเบเบเบฒเบเบฅเบถเบ "${item?.name}" เบญเบญเบเบเบฒเบเบเบฐเบเปเบฒ?`,
//             onConfirm: () => {
//                 removeFromCart(id);
//                 showNotification("เบฅเบถเบเบชเบดเบเบเปเบฒเบญเบญเบเบเบฒเบเบเบฐเบเปเบฒเปเบฅเปเบง", "success");
//                 setConfirmDialog({ ...confirmDialog, open: false });
//             },
//         });
//     };

//     // Clear all cart
//     const clearAllCart = () => {
//         setConfirmDialog({
//             open: true,
//             title: "เบฅเปเบฒเบเบเบฐเบเปเบฒ",
//             message: "เบเปเบฒเบเปเบเปเปเบเบเปเปเบงเปเบฒเบเปเบญเบเบเบฒเบเบฅเปเบฒเบเบชเบดเบเบเปเบฒเบเบฑเบเปเบปเบเบญเบญเบเบเบฒเบเบเบฐเบเปเบฒ?",
//             onConfirm: () => {
//                 clearCart();
//                 showNotification("เบฅเปเบฒเบเบเบฐเบเปเบฒเปเบฅเปเบง", "success");
//                 setConfirmDialog({ ...confirmDialog, open: false });
//             },
//         });
//     };

//     // Place order
//     const placeOrder = () => {
//         const grandTotal = calculateGrandTotal();
//         setConfirmDialog({
//             open: true,
//             title: "เบขเบทเบเบขเบฑเบเบเบฒเบเบชเบฑเปเบเบเบทเป",
//             message: `เบเปเบฒเบเปเบเปเปเบเบเปเปเบงเปเบฒเบเปเบญเบเบเบฒเบเบชเบฑเปเบเบเบทเปเบชเบดเบเบเปเบฒเบเบฑเบเปเบปเบ ${cartItems.length} เบฅเบฒเบเบเบฒเบ\nเบฅเบฒเบเบฒเบฅเบงเบก: ${formatLaoKip(grandTotal)}`,
//             onConfirm: () => {
//                 // Here you would typically send the order to your backend
//                 showNotification("เบชเบฑเปเบเบเบทเปเบชเบณเปเบฅเบฑเบเปเบฅเปเบง!", "success");
//                 clearCart();
//                 setConfirmDialog({ ...confirmDialog, open: false });
//                 // Navigate to order confirmation or back to products
//                 setTimeout(() => {
//                     navigate("/productdata");
//                 }, 2000);
//             },
//         });
//     };

//     // Notification helpers
//     const showNotification = (message, severity = "success") => {
//         setNotification({ open: true, message, severity });
//     };

//     const closeNotification = () => {
//         setNotification((prev) => ({ ...prev, open: false }));
//     };

//     const closeConfirmDialog = () => {
//         setConfirmDialog({ ...confirmDialog, open: false });
//     };

//     return (
//         <Box
//             sx={{
//                 fontFamily: "Noto Sans Lao, sans-serif",
//                 backgroundColor: "#f5f5f5",
//                 minHeight: "100vh",
//                 p: 3
//             }}
//         >
//             {/* Header เบชเบตเบเบฝเบง */}
//             <Paper
//                 sx={{
//                     bgcolor: "#079578",
//                     color: "white",
//                     p: 2,
//                     borderRadius: "8px",
//                     mb: 3
//                 }}
//                 elevation={0}
//             >
//                 <Typography
//                     variant="h6"
//                     sx={{
//                         fontWeight: "bold",
//                         fontFamily: "Noto Sans Lao, sans-serif",
//                     }}
//                 >
//                     เบฅเบฒเบเบเบฒเบเบชเบฑเปเบเบเบทเปเบชเบดเบเบเปเบฒ
//                 </Typography>
//             </Paper>

//             {/* Empty cart message */}
//             {cartItems.length === 0 && (
//                 <Paper sx={{ p: 5, textAlign: "center" }}>
//                     <Typography
//                         variant="h6"
//                         color="text.secondary"
//                         sx={{ fontFamily: "Noto Sans Lao, sans-serif", mb: 3 }}
//                     >
//                         เบเบฐเบเปเบฒเบเบญเบเบเปเบฒเบเบงเปเบฒเบเปเบเบปเปเบฒ
//                     </Typography>
//                     <Button
//                         variant="contained"
//                         onClick={() => navigate("/productdata")}
//                         sx={{
//                             bgcolor: "#079578",
//                             "&:hover": { bgcolor: "#046c56" },
//                             fontFamily: "Noto Sans Lao, sans-serif",
//                         }}
//                     >
//                         เปเบเปเบฅเบทเบญเบเบชเบดเบเบเปเบฒ
//                     </Button>
//                 </Paper>
//             )}

//             {/* Cart items table */}
//             {cartItems.length > 0 && (
//                 <Paper sx={{ borderRadius: "12px", overflow: "hidden" }}>
//                     <TableContainer>
//                         <Table>
//                             <TableHead>
//                                 <TableRow sx={{ bgcolor: "#079578" }}>
//                                     <TableCell
//                                         sx={{
//                                             fontFamily: "Noto Sans Lao, sans-serif",
//                                             fontWeight: "bold",
//                                             color: "white",
//                                             fontSize: "1.1rem"
//                                         }}
//                                     >
//                                         เบชเบดเบเบเปเบฒ
//                                     </TableCell>
//                                     <TableCell
//                                         sx={{
//                                             fontFamily: "Noto Sans Lao, sans-serif",
//                                             fontWeight: "bold",
//                                             color: "white",
//                                             fontSize: "1.1rem"
//                                         }}
//                                     >
//                                         เบเบฐเปเบเบเบชเบดเบเบเปเบฒ
//                                     </TableCell>
//                                     <TableCell
//                                         sx={{
//                                             fontFamily: "Noto Sans Lao, sans-serif",
//                                             fontWeight: "bold",
//                                             color: "white",
//                                             fontSize: "1.1rem"
//                                         }}
//                                     >
//                                         เบเบตเปเบซเปเป
//                                     </TableCell>
//                                     {/* ๐ เปเบเบตเปเบกเบซเบปเบงเบเบฒเบเบฐเบฅเบฒเบเบฅเบฒเบเบฒ */}
//                                     <TableCell
//                                         sx={{
//                                             fontFamily: "Noto Sans Lao, sans-serif",
//                                             fontWeight: "bold",
//                                             color: "white",
//                                             fontSize: "1.1rem",
//                                             textAlign: "center"
//                                         }}
//                                     >
//                                         เบฅเบฒเบเบฒ/เบซเบปเบงเปเปเบงเบ
//                                     </TableCell>
//                                     <TableCell
//                                         sx={{
//                                             fontFamily: "Noto Sans Lao, sans-serif",
//                                             fontWeight: "bold",
//                                             color: "white",
//                                             fontSize: "1.1rem",
//                                             textAlign: "center"
//                                         }}
//                                     >
//                                         เบเบณเบเบงเบ
//                                     </TableCell>
//                                     <TableCell
//                                         sx={{
//                                             fontFamily: "Noto Sans Lao, sans-serif",
//                                             fontWeight: "bold",
//                                             color: "white",
//                                             fontSize: "1.1rem"
//                                         }}
//                                     >
//                                         เบซเบปเบงเปเปเบงเบ
//                                     </TableCell>
//                                     {/* ๐ เปเบเบตเปเบกเบซเบปเบงเบเบฒเบเบฐเบฅเบฒเบเบเบนเปเบชเบฐเปเบญเบ */}
//                                     <TableCell
//                                         sx={{
//                                             fontFamily: "Noto Sans Lao, sans-serif",
//                                             fontWeight: "bold",
//                                             color: "white",
//                                             fontSize: "1.1rem"
//                                         }}
//                                     >
//                                         เบเบนเปเบชเบฐเปเบญเบ
//                                     </TableCell>
//                                     {/* ๐ เปเบเบตเปเบกเบซเบปเบงเบเบฒเบเบฐเบฅเบฒเบเบฅเบฒเบเบฒเบฅเบงเบก */}
//                                     <TableCell
//                                         sx={{
//                                             fontFamily: "Noto Sans Lao, sans-serif",
//                                             fontWeight: "bold",
//                                             color: "white",
//                                             fontSize: "1.1rem",
//                                             textAlign: "center"
//                                         }}
//                                     >
//                                         เบฅเบฒเบเบฒเบฅเบงเบก
//                                     </TableCell>
//                                     <TableCell
//                                         sx={{
//                                             fontFamily: "Noto Sans Lao, sans-serif",
//                                             fontWeight: "bold",
//                                             color: "white",
//                                             fontSize: "1.1rem",
//                                             textAlign: "center"
//                                         }}
//                                     >
//                                         เบเบฑเบเบเบฒเบ
//                                     </TableCell>
//                                 </TableRow>
//                             </TableHead>
//                             <TableBody>
//                                 {cartItems.map((item, index) => (
//                                     <TableRow
//                                         key={item.id}
//                                         hover
//                                         sx={{
//                                             "&:nth-of-type(odd)": {
//                                                 backgroundColor: "#f9f9f9",
//                                             },
//                                             "&:hover": {
//                                                 backgroundColor: "#f0f0f0",
//                                             },
//                                         }}
//                                     >
//                                         {/* เบชเบดเบเบเปเบฒ (เบฎเบนเบ + เบเบทเป) */}
//                                         <TableCell>
//                                             <Box sx={{ display: "flex", alignItems: "center" }}>
//                                                 <Avatar
//                                                     src={item.image}
//                                                     sx={{
//                                                         width: 50,
//                                                         height: 50,
//                                                         mr: 2,
//                                                         borderRadius: "8px"
//                                                     }}
//                                                     variant="rounded"
//                                                 />
//                                                 <Typography
//                                                     sx={{
//                                                         fontFamily: "Noto Sans Lao, sans-serif",
//                                                         fontWeight: "500"
//                                                     }}
//                                                 >
//                                                     {item.name}
//                                                 </Typography>
//                                             </Box>
//                                         </TableCell>

//                                         {/* เบเบฐเปเบเบเบชเบดเบเบเปเบฒ */}
//                                         <TableCell
//                                             sx={{
//                                                 fontFamily: "Noto Sans Lao, sans-serif",
//                                                 fontSize: "1rem"
//                                             }}
//                                         >
//                                             {item.category}
//                                         </TableCell>

//                                         {/* เบเบตเปเบซเปเป */}
//                                         <TableCell
//                                             sx={{
//                                                 fontFamily: "Noto Sans Lao, sans-serif",
//                                                 fontSize: "1rem"
//                                             }}
//                                         >
//                                             {item.brand}
//                                         </TableCell>

//                                         {/* ๐ เบฅเบฒเบเบฒ/เบซเบปเบงเปเปเบงเบ */}
//                                         <TableCell sx={{ textAlign: "center" }}>
//                                             <Box sx={{ display: "flex", alignItems: "center", justifyContent: "center", gap: 0.5 }}>
//                                                 <PriceChangeIcon fontSize="small" color="primary" />
//                                                 <Typography
//                                                     sx={{
//                                                         fontFamily: "Noto Sans Lao, sans-serif",
//                                                         fontSize: "1rem",
//                                                         fontWeight: "bold",
//                                                         color: "#079578"
//                                                     }}
//                                                 >
//                                                     {formatLaoKip(item.price || 0)}
//                                                 </Typography>
//                                             </Box>
//                                         </TableCell>

//                                         {/* เบเบณเบเบงเบ */}
//                                         <TableCell sx={{ textAlign: "center" }}>
//                                             <Box sx={{ display: "flex", alignItems: "center", justifyContent: "center" }}>
//                                                 <IconButton
//                                                     size="small"
//                                                     onClick={() => updateQuantity(item.id, item.quantity - 1)}
//                                                     sx={{
//                                                         bgcolor: "#f5f5f5",
//                                                         "&:hover": { bgcolor: "#e0e0e0" },
//                                                         mr: 1
//                                                     }}
//                                                 >
//                                                     <RemoveIcon />
//                                                 </IconButton>

//                                                 <Typography
//                                                     sx={{
//                                                         mx: 2,
//                                                         fontFamily: "Noto Sans Lao, sans-serif",
//                                                         fontSize: "1.2rem",
//                                                         fontWeight: "bold",
//                                                         minWidth: "30px",
//                                                         textAlign: "center",
//                                                     }}
//                                                 >
//                                                     {item.quantity}
//                                                 </Typography>

//                                                 <IconButton
//                                                     size="small"
//                                                     onClick={() => updateQuantity(item.id, item.quantity + 1)}
//                                                     sx={{
//                                                         bgcolor: "#079578",
//                                                         color: "white",
//                                                         "&:hover": { bgcolor: "#046c56" },
//                                                         ml: 1
//                                                     }}
//                                                 >
//                                                     <AddIcon />
//                                                 </IconButton>
//                                             </Box>
//                                         </TableCell>

//                                         {/* เบซเบปเบงเปเปเบงเบ */}
//                                         <TableCell
//                                             sx={{
//                                                 fontFamily: "Noto Sans Lao, sans-serif",
//                                                 fontSize: "1rem"
//                                             }}
//                                         >
//                                             {item.unit}
//                                         </TableCell>

//                                         {/* ๐ เบเบนเปเบชเบฐเปเบญเบ */}
//                                         <TableCell>
//                                             <Box sx={{ display: "flex", alignItems: "center", gap: 0.5 }}>
//                                                 <BusinessIcon fontSize="small" color="action" />
//                                                 <Typography
//                                                     sx={{
//                                                         fontFamily: "Noto Sans Lao, sans-serif",
//                                                         fontSize: "0.9rem"
//                                                     }}
//                                                 >
//                                                     {item.supplier || "เบเปเปเบฅเบฐเบเบธเบเบนเปเบชเบฐเปเบญเบ"}
//                                                 </Typography>
//                                             </Box>
//                                         </TableCell>

//                                         {/* ๐ เบฅเบฒเบเบฒเบฅเบงเบก */}
//                                         <TableCell sx={{ textAlign: "center" }}>
//                                             <Box sx={{ display: "flex", alignItems: "center", justifyContent: "center", gap: 0.5 }}>
//                                                 <CalculateIcon fontSize="small" color="secondary" />
//                                                 <Typography
//                                                     sx={{
//                                                         fontFamily: "Noto Sans Lao, sans-serif",
//                                                         fontSize: "1rem",
//                                                         fontWeight: "bold",
//                                                         color: "#d32f2f"
//                                                     }}
//                                                 >
//                                                     {formatLaoKip(calculateItemTotal(item.price, item.quantity))}
//                                                 </Typography>
//                                             </Box>
//                                         </TableCell>

//                                         {/* เบเบฑเบเบเบฒเบ */}
//                                         <TableCell sx={{ textAlign: "center" }}>
//                                             <Box sx={{ display: "flex", gap: 1, justifyContent: "center" }}>
//                                                 {/* เบเบธเปเบกเบฅเบปเบเบชเบดเบเบเปเบฒเบญเบญเบเบเบฒเบเบเบฐเบเปเบฒ */}
//                                                 <Button
//                                                     variant="contained"
//                                                     onClick={() => removeItem(item.id)}
//                                                     startIcon={<DeleteIcon />}
//                                                     sx={{
//                                                         bgcolor: "#f44336",
//                                                         color: "white",
//                                                         "&:hover": {
//                                                             bgcolor: "#d32f2f",
//                                                         },
//                                                         fontFamily: "Noto Sans Lao, sans-serif",
//                                                         fontSize: "0.8rem",
//                                                         px: 2,
//                                                         py: 0.5
//                                                     }}
//                                                 >
//                                                     เบฅเบปเบเบญเบญเบ
//                                                 </Button>
//                                             </Box>
//                                         </TableCell>
//                                     </TableRow>
//                                 ))}
//                             </TableBody>
//                         </Table>
//                     </TableContainer>

//                     {/* ๐ เบชเปเบงเบเบชเบฐเบซเบผเบธเบเบฅเบฒเบเบฒเบฅเบงเบกเบเบฑเบเปเบปเบ */}
//                     <Box sx={{ p: 3, bgcolor: "#f8f9fa", borderTop: "1px solid #e0e0e0" }}>
//                         <Divider sx={{ mb: 2 }} />
//                         <Box sx={{ display: "flex", justifyContent: "space-between", alignItems: "center", mb: 2 }}>
//                             <Typography
//                                 variant="h6"
//                                 sx={{
//                                     fontFamily: "Noto Sans Lao, sans-serif",
//                                     fontWeight: "bold",
//                                     color: "#333"
//                                 }}
//                             >
//                                 เบเบณเบเบงเบเบฅเบฒเบเบเบฒเบเบเบฑเบเปเบปเบ: {cartItems.length} เบฅเบฒเบเบเบฒเบ
//                             </Typography>
//                             <Typography
//                                 variant="h6"
//                                 sx={{
//                                     fontFamily: "Noto Sans Lao, sans-serif",
//                                     fontWeight: "bold",
//                                     color: "#333"
//                                 }}
//                             >
//                                 เบเบณเบเบงเบเบชเบดเบเบเปเบฒเบฅเบงเบก: {getTotalItems()} เบเบดเปเบ
//                             </Typography>
//                         </Box>
//                         <Box sx={{ display: "flex", justifyContent: "flex-end", mb: 2 }}>
//                             <Box
//                                 sx={{
//                                     bgcolor: "#079578",
//                                     color: "white",
//                                     p: 2,
//                                     borderRadius: "8px",
//                                     minWidth: "200px",
//                                     textAlign: "center"
//                                 }}
//                             >
//                                 <Typography
//                                     variant="h5"
//                                     sx={{
//                                         fontFamily: "Noto Sans Lao, sans-serif",
//                                         fontWeight: "bold"
//                                     }}
//                                 >
//                                     เบฅเบฒเบเบฒเบฅเบงเบกเบเบฑเบเปเบปเบ
//                                 </Typography>
//                                 <Typography
//                                     variant="h4"
//                                     sx={{
//                                         fontFamily: "Noto Sans Lao, sans-serif",
//                                         fontWeight: "bold",
//                                         mt: 1
//                                     }}
//                                 >
//                                     {formatLaoKip(calculateGrandTotal())}
//                                 </Typography>
//                             </Box>
//                         </Box>
//                     </Box>

//                     {/* เบเบธเปเบกเบเปเบฒเบเบฅเบธเปเบก */}
//                     <Box
//                         sx={{
//                             p: 3,
//                             bgcolor: "white",
//                             display: "flex",
//                             justifyContent: "center",
//                             gap: 2,
//                             borderTop: "1px solid #e0e0e0"
//                         }}
//                     >
//                         {/* เบเบธเปเบกเบเบปเบเปเบฅเบตเบเบเบฒเบเบชเบฑเปเบเบเบทเป */}
//                         <Button
//                             variant="contained"
//                             onClick={clearAllCart}
//                             sx={{
//                                 bgcolor: "#f44336",
//                                 "&:hover": { bgcolor: "#d32f2f" },
//                                 fontFamily: "Noto Sans Lao, sans-serif",
//                                 px: 4,
//                                 py: 1.5,
//                                 fontSize: "1rem",
//                                 fontWeight: "bold"
//                             }}
//                         >
//                             เบเบปเบเปเบฅเบตเบเบเบฒเบเบชเบฑเปเบเบเบทเป
//                         </Button>

//                         {/* เบเบธเปเบกเปเบฅเบทเบญเบเบชเบดเบเบเปเบฒเปเบเบตเปเบก */}
//                         <Button
//                             variant="outlined"
//                             onClick={() => navigate("/productdata")}
//                             sx={{
//                                 borderColor: "#999",
//                                 color: "#666",
//                                 "&:hover": {
//                                     borderColor: "#666",
//                                     bgcolor: "#f5f5f5"
//                                 },
//                                 fontFamily: "Noto Sans Lao, sans-serif",
//                                 px: 4,
//                                 py: 1.5,
//                                 fontSize: "1rem"
//                             }}
//                         >
//                             เปเบฅเบทเบญเบเบชเบดเบเบเปเบฒเปเบเบตเปเบก
//                         </Button>

//                         {/* เบเบธเปเบกเบขเบทเบเบขเบฑเบเบเบฒเบเบชเบฑเปเบเบเบทเป */}
//                         <Button
//                             variant="contained"
//                             onClick={placeOrder}
//                             sx={{
//                                 bgcolor: "#079578",
//                                 "&:hover": { bgcolor: "#046c56" },
//                                 fontFamily: "Noto Sans Lao, sans-serif",
//                                 px: 4,
//                                 py: 1.5,
//                                 fontSize: "1rem",
//                                 fontWeight: "bold"
//                             }}
//                         >
//                             เบขเบทเบเบขเบฑเบเบเบฒเบเบชเบฑเปเบเบเบทเป
//                         </Button>
//                     </Box>
//                 </Paper>
//             )}

//             {/* Confirmation Dialog */}
//             <Dialog
//                 open={confirmDialog.open}
//                 onClose={closeConfirmDialog}
//                 PaperProps={{
//                     sx: { fontFamily: "Noto Sans Lao, sans-serif" },
//                 }}
//             >
//                 <DialogTitle sx={{ fontFamily: "Noto Sans Lao, sans-serif" }}>
//                     {confirmDialog.title}
//                 </DialogTitle>
//                 <DialogContent>
//                     <Typography sx={{ fontFamily: "Noto Sans Lao, sans-serif", whiteSpace: "pre-line" }}>
//                         {confirmDialog.message}
//                     </Typography>
//                 </DialogContent>
//                 <DialogActions>
//                     <Button
//                         onClick={closeConfirmDialog}
//                         sx={{ fontFamily: "Noto Sans Lao, sans-serif" }}
//                     >
//                         เบเบปเบเปเบฅเบตเบ
//                     </Button>
//                     <Button
//                         onClick={confirmDialog.onConfirm}
//                         variant="contained"
//                         sx={{
//                             bgcolor: "#079578",
//                             "&:hover": { bgcolor: "#046c56" },
//                             fontFamily: "Noto Sans Lao, sans-serif",
//                         }}
//                     >
//                         เบขเบทเบเบขเบฑเบ
//                     </Button>
//                 </DialogActions>
//             </Dialog>

//             {/* Notification Snackbar */}
//             <Snackbar
//                 open={notification.open}
//                 autoHideDuration={3000}
//                 onClose={closeNotification}
//                 anchorOrigin={{ vertical: "bottom", horizontal: "right" }}
//             >
//                 <Alert
//                     onClose={closeNotification}
//                     severity={notification.severity}
//                     sx={{ fontFamily: "Noto Sans Lao, sans-serif" }}
//                 >
//                     {notification.message}
//                 </Alert>
//             </Snackbar>
//         </Box>
//     );
// };

// export default Cart;







// src/components/Cart.jsx
import React, { useState } from "react";
import {
    Box,
    Typography,
    Paper,
    Button,
    Table,
    TableBody,
    TableCell,
    TableContainer,
    TableHead,
    TableRow,
    IconButton,
    Snackbar,
    Alert,
    Dialog,
    DialogTitle,
    DialogContent,
    DialogActions,
    Avatar,
    Divider,
} from "@mui/material";
import AddIcon from "@mui/icons-material/Add";
import RemoveIcon from "@mui/icons-material/Remove";
import DeleteIcon from "@mui/icons-material/Delete";
import PriceChangeIcon from "@mui/icons-material/PriceChange";
import BusinessIcon from "@mui/icons-material/Business";
import CalculateIcon from "@mui/icons-material/Calculate";
import { useNavigate } from "react-router-dom";

// Import Cart Context
import { useCart } from "../context/CartContext";

const Cart = () => {
    // Use Cart Context
    const {
        cartItems,
        updateCartItemQuantity,
        removeFromCart,
        clearCart,
        getTotalItems
    } = useCart();

    const navigate = useNavigate();

    const [notification, setNotification] = useState({
        open: false,
        message: "",
        severity: "success",
    });

    const [confirmDialog, setConfirmDialog] = useState({
        open: false,
        title: "",
        message: "",
        onConfirm: null,
    });

    // ๐ เบเบฑเบเบเบฑเบเบเบฑเบเบฎเบนเบเปเบเบเปเบเบดเบเบฅเบฒเบง
    const formatLaoKip = (amount) => {
        if (!amount || amount === 0) return '0 เบเบตเบ';
        const formatted = Number(amount).toLocaleString('en-US');
        return `${formatted} เบเบตเบ`;
    };

    // ๐ เบเบฑเบเบเบฑเบเบเบดเบเปเบฅเปเบฅเบฒเบเบฒเบฅเบงเบกเบเบญเบเปเบเปเบฅเบฐเบฅเบฒเบเบเบฒเบ
    const calculateItemTotal = (price, quantity) => {
        return (price || 0) * quantity;
    };

    // ๐ เบเบฑเบเบเบฑเบเบเบดเบเปเบฅเปเบฅเบฒเบเบฒเบฅเบงเบกเบเบฑเบเปเบปเบ
    const calculateGrandTotal = () => {
        return cartItems.reduce((total, item) => {
            return total + calculateItemTotal(item.price || 0, item.quantity);
        }, 0);
    };

    // ๐ เบเบฑเบเบเบฑเบเบชเปเบฒเบเปเบฅเบเบเบตเบเบฒเบเบชเบฑเปเบเบเบทเป
    const generateOrderId = () => {
        const timestamp = Date.now();
        const random = Math.floor(Math.random() * 1000);
        return `P${timestamp}${random}`.slice(0, 8);
    };

    // ๐ เบเบฑเบเบเบฑเบเบเบฑเบเบเบถเบเบเปเปเบกเบนเบเบเบฒเบเบชเบฑเปเบเบเบทเปเปเบชเป localStorage
    const savePurchaseToHistory = (orderData) => {
        try {
            // เบเบถเบเบเปเปเบกเบนเบเบเบฐเบซเบงเบฑเบเบเบฒเบเบชเบฑเปเบเบเบทเปเบเบตเปเบกเบตเบขเบนเปเปเบฅเปเบง
            const existingHistory = localStorage.getItem('purchaseHistory');
            const purchaseHistory = existingHistory ? JSON.parse(existingHistory) : [];

            // เปเบเบตเปเบกเบเปเปเบกเบนเบเบเบฒเบเบชเบฑเปเบเบเบทเปเปเปเป
            purchaseHistory.unshift(orderData); // เปเบเป unshift เปเบเบทเปเบญเปเบซเปเบเปเปเบกเบนเบเปเปเปเบขเบนเปเปเบเบดเบเบชเบธเบ

            // เบเบฑเบเบเบถเบเบเบฑเบเบเบทเบเปเบ localStorage
            localStorage.setItem('purchaseHistory', JSON.stringify(purchaseHistory));

            console.log('เบเบฑเบเบเบถเบเบเปเปเบกเบนเบเบเบฒเบเบชเบฑเปเบเบเบทเปเบชเบณเปเบฅเบฑเบ:', orderData);
        } catch (error) {
            console.error('เปเบเบตเบเบเปเปเบเบดเบเบเบฒเบเปเบเบเบฒเบเบเบฑเบเบเบถเบเบเปเปเบกเบนเบ:', error);
        }
    };

    // Update quantity
    const updateQuantity = (id, newQuantity) => {
        updateCartItemQuantity(id, newQuantity);
        showNotification("เบญเบฑเบเปเบเบเบเบณเบเบงเบเปเบฅเปเบง", "success");
    };

    // Remove item from cart
    const removeItem = (id) => {
        const item = cartItems.find((item) => item.id === id);
        setConfirmDialog({
            open: true,
            title: "เบฅเบถเบเบชเบดเบเบเปเบฒ",
            message: `เบเปเบฒเบเปเบเปเปเบเบเปเปเบงเปเบฒเบเปเบญเบเบเบฒเบเบฅเบถเบ "${item?.name}" เบญเบญเบเบเบฒเบเบเบฐเบเปเบฒ?`,
            onConfirm: () => {
                removeFromCart(id);
                showNotification("เบฅเบถเบเบชเบดเบเบเปเบฒเบญเบญเบเบเบฒเบเบเบฐเบเปเบฒเปเบฅเปเบง", "success");
                setConfirmDialog({ ...confirmDialog, open: false });
            },
        });
    };

    // Clear all cart
    const clearAllCart = () => {
        setConfirmDialog({
            open: true,
            title: "เบฅเปเบฒเบเบเบฐเบเปเบฒ",
            message: "เบเปเบฒเบเปเบเปเปเบเบเปเปเบงเปเบฒเบเปเบญเบเบเบฒเบเบฅเปเบฒเบเบชเบดเบเบเปเบฒเบเบฑเบเปเบปเบเบญเบญเบเบเบฒเบเบเบฐเบเปเบฒ?",
            onConfirm: () => {
                clearCart();
                showNotification("เบฅเปเบฒเบเบเบฐเบเปเบฒเปเบฅเปเบง", "success");
                setConfirmDialog({ ...confirmDialog, open: false });
            },
        });
    };

    // ๐ เบเบฑเบเบเบธเบเบเบฑเบเบเบฑเบ Place order
    const placeOrder = () => {
        const grandTotal = calculateGrandTotal();
        setConfirmDialog({
            open: true,
            title: "เบขเบทเบเบขเบฑเบเบเบฒเบเบชเบฑเปเบเบเบทเป",
            message: `เบเปเบฒเบเปเบเปเปเบเบเปเปเบงเปเบฒเบเปเบญเบเบเบฒเบเบชเบฑเปเบเบเบทเปเบชเบดเบเบเปเบฒเบเบฑเบเปเบปเบ ${cartItems.length} เบฅเบฒเบเบเบฒเบ\nเบฅเบฒเบเบฒเบฅเบงเบก: ${formatLaoKip(grandTotal)}`,
            onConfirm: () => {
                // ๐ เบชเปเบฒเบเบเปเปเบกเบนเบเบเบฒเบเบชเบฑเปเบเบเบทเป
                const orderId = generateOrderId();
                const currentDate = new Date().toISOString().split('T')[0];

                // เบเบถเบเบเปเปเบกเบนเบเบเบนเปเปเบเปเบเบฒเบ localStorage เปเบฅเบฐ เปเบเบเปเบเบฑเบ string เบเบณเบกเบฐเบเบฒ
                let currentUser = 'เบเบนเปเปเบเปเบฅเบฐเบเบปเบ';
                try {
                    const savedUser = localStorage.getItem('currentUser');
                    if (savedUser) {
                        // เบเปเบฒเปเบเบฑเบ JSON object เปเบซเป parse เปเบฅเปเบงเปเบญเบปเบฒ username เบซเบผเบท name
                        if (savedUser.startsWith('{')) {
                            const userObj = JSON.parse(savedUser);
                            currentUser = userObj.username || userObj.name || userObj.fullName || 'เบเบนเปเปเบเปเบฅเบฐเบเบปเบ';
                        } else {
                            // เบเปเบฒเปเบเบฑเบ string เบเบณเบกเบฐเบเบฒเปเบซเปเปเบเปเปเบเบเบเบปเบ
                            currentUser = savedUser;
                        }
                    }
                } catch (error) {
                    console.log('เปเบเบตเบเบเปเปเบเบดเบเบเบฒเบเปเบเบเบฒเบเปเบเบเบเปเปเบกเบนเบเบเบนเปเปเบเป:', error);
                    currentUser = 'เบเบนเปเปเบเปเบฅเบฐเบเบปเบ';
                }

                const orderData = {
                    id: orderId,
                    date: currentDate,
                    user_id: currentUser,
                    invoice_no: `INV-${orderId}`,
                    total_amount: grandTotal,
                    items: cartItems.map(item => ({
                        product_id: item.id,
                        product_name: item.name,
                        quantity: item.quantity,
                        price: item.price || 0,
                        subtotal: calculateItemTotal(item.price, item.quantity),
                        category: item.category,
                        brand: item.brand,
                        unit: item.unit,
                        supplier: item.supplier,
                        image: item.image
                    })),
                    status: 'completed',
                    created_at: new Date().toISOString()
                };

                // ๐ เธเธฑเธเธึถเธเธเนเธญเธกเธนเธฅเธเธฒเธฃเธชเธฑเนเธเธเธทเนเธญ
                savePurchaseToHistory(orderData);

                // เนเธชเธเธเธเนเธญเธเธงเธฒเธกเธชเธณเนเธฃเนเธ
                showNotification("เบชเบฑเปเบเบเบทเปเบชเบณเปเบฅเบฑเบเปเบฅเปเบง!", "success");

                // เบฅเปเบฒเบเบเบฐเบเปเบฒ
                clearCart();
                setConfirmDialog({ ...confirmDialog, open: false });

                // ๐ เปเบเบซเบฒเปเปเบฒเบเบฐเบซเบงเบฑเบเบเบฒเบเบชเบฑเปเบเบเบทเปเบเบฑเบเบเบต
                setTimeout(() => {
                    navigate("/management_purchase");
                }, 1500);
            },
        });
    };

    // Notification helpers
    const showNotification = (message, severity = "success") => {
        setNotification({ open: true, message, severity });
    };

    const closeNotification = () => {
        setNotification((prev) => ({ ...prev, open: false }));
    };

    const closeConfirmDialog = () => {
        setConfirmDialog({ ...confirmDialog, open: false });
    };

    return (
        <Box
            sx={{
                fontFamily: "Noto Sans Lao, sans-serif",
                backgroundColor: "#f5f5f5",
                minHeight: "100vh",
                p: 3
            }}
        >
            {/* Header เบชเบตเบเบฝเบง */}
            <Paper
                sx={{
                    bgcolor: "#079578",
                    color: "white",
                    p: 2,
                    borderRadius: "8px",
                    mb: 3
                }}
                elevation={0}
            >
                <Typography
                    variant="h6"
                    sx={{
                        fontWeight: "bold",
                        fontFamily: "Noto Sans Lao, sans-serif",
                    }}
                >
                    เบฅเบฒเบเบเบฒเบเบชเบฑเปเบเบเบทเปเบชเบดเบเบเปเบฒ
                </Typography>
            </Paper>

            {/* Empty cart message */}
            {cartItems.length === 0 && (
                <Paper sx={{ p: 5, textAlign: "center" }}>
                    <Typography
                        variant="h6"
                        color="text.secondary"
                        sx={{ fontFamily: "Noto Sans Lao, sans-serif", mb: 3 }}
                    >
                        เบเบฐเบเปเบฒเบเบญเบเบเปเบฒเบเบงเปเบฒเบเปเบเบปเปเบฒ
                    </Typography>
                    <Button
                        variant="contained"
                        onClick={() => navigate("/productdata")}
                        sx={{
                            bgcolor: "#079578",
                            "&:hover": { bgcolor: "#046c56" },
                            fontFamily: "Noto Sans Lao, sans-serif",
                        }}
                    >
                        เปเบเปเบฅเบทเบญเบเบชเบดเบเบเปเบฒ
                    </Button>
                </Paper>
            )}

            {/* Cart items table */}
            {cartItems.length > 0 && (
                <Paper sx={{ borderRadius: "12px", overflow: "hidden" }}>
                    <TableContainer>
                        <Table>
                            <TableHead>
                                <TableRow sx={{ bgcolor: "#079578" }}>
                                    <TableCell
                                        sx={{
                                            fontFamily: "Noto Sans Lao, sans-serif",
                                            fontWeight: "bold",
                                            color: "white",
                                            fontSize: "1.1rem"
                                        }}
                                    >
                                        เบชเบดเบเบเปเบฒ
                                    </TableCell>
                                    <TableCell
                                        sx={{
                                            fontFamily: "Noto Sans Lao, sans-serif",
                                            fontWeight: "bold",
                                            color: "white",
                                            fontSize: "1.1rem"
                                        }}
                                    >
                                        เบเบฐเปเบเบเบชเบดเบเบเปเบฒ
                                    </TableCell>
                                    <TableCell
                                        sx={{
                                            fontFamily: "Noto Sans Lao, sans-serif",
                                            fontWeight: "bold",
                                            color: "white",
                                            fontSize: "1.1rem"
                                        }}
                                    >
                                        เบเบตเปเบซเปเป
                                    </TableCell>
                                    <TableCell
                                        sx={{
                                            fontFamily: "Noto Sans Lao, sans-serif",
                                            fontWeight: "bold",
                                            color: "white",
                                            fontSize: "1.1rem",
                                            textAlign: "center"
                                        }}
                                    >
                                        เบฅเบฒเบเบฒ/เบซเบปเบงเปเปเบงเบ
                                    </TableCell>
                                    <TableCell
                                        sx={{
                                            fontFamily: "Noto Sans Lao, sans-serif",
                                            fontWeight: "bold",
                                            color: "white",
                                            fontSize: "1.1rem",
                                            textAlign: "center"
                                        }}
                                    >
                                        เบเบณเบเบงเบ
                                    </TableCell>
                                    <TableCell
                                        sx={{
                                            fontFamily: "Noto Sans Lao, sans-serif",
                                            fontWeight: "bold",
                                            color: "white",
                                            fontSize: "1.1rem"
                                        }}
                                    >
                                        เบซเบปเบงเปเปเบงเบ
                                    </TableCell>
                                    <TableCell
                                        sx={{
                                            fontFamily: "Noto Sans Lao, sans-serif",
                                            fontWeight: "bold",
                                            color: "white",
                                            fontSize: "1.1rem"
                                        }}
                                    >
                                        เบเบนเปเบชเบฐเปเบญเบ
                                    </TableCell>
                                    <TableCell
                                        sx={{
                                            fontFamily: "Noto Sans Lao, sans-serif",
                                            fontWeight: "bold",
                                            color: "white",
                                            fontSize: "1.1rem",
                                            textAlign: "center"
                                        }}
                                    >
                                        เบฅเบฒเบเบฒเบฅเบงเบก
                                    </TableCell>
                                    <TableCell
                                        sx={{
                                            fontFamily: "Noto Sans Lao, sans-serif",
                                            fontWeight: "bold",
                                            color: "white",
                                            fontSize: "1.1rem",
                                            textAlign: "center"
                                        }}
                                    >
                                        เบเบฑเบเบเบฒเบ
                                    </TableCell>
                                </TableRow>
                            </TableHead>
                            <TableBody>
                                {cartItems.map((item, index) => (
                                    <TableRow
                                        key={item.id}
                                        hover
                                        sx={{
                                            "&:nth-of-type(odd)": {
                                                backgroundColor: "#f9f9f9",
                                            },
                                            "&:hover": {
                                                backgroundColor: "#f0f0f0",
                                            },
                                        }}
                                    >
                                        {/* เบชเบดเบเบเปเบฒ (เบฎเบนเบ + เบเบทเป) */}
                                        <TableCell>
                                            <Box sx={{ display: "flex", alignItems: "center" }}>
                                                <Avatar
                                                    src={item.image}
                                                    sx={{
                                                        width: 50,
                                                        height: 50,
                                                        mr: 2,
                                                        borderRadius: "8px"
                                                    }}
                                                    variant="rounded"
                                                />
                                                <Typography
                                                    sx={{
                                                        fontFamily: "Noto Sans Lao, sans-serif",
                                                        fontWeight: "500"
                                                    }}
                                                >
                                                    {item.name}
                                                </Typography>
                                            </Box>
                                        </TableCell>

                                        {/* เบเบฐเปเบเบเบชเบดเบเบเปเบฒ */}
                                        <TableCell
                                            sx={{
                                                fontFamily: "Noto Sans Lao, sans-serif",
                                                fontSize: "1rem"
                                            }}
                                        >
                                            {item.category}
                                        </TableCell>

                                        {/* เบเบตเปเบซเปเป */}
                                        <TableCell
                                            sx={{
                                                fontFamily: "Noto Sans Lao, sans-serif",
                                                fontSize: "1rem"
                                            }}
                                        >
                                            {item.brand}
                                        </TableCell>

                                        {/* เบฅเบฒเบเบฒ/เบซเบปเบงเปเปเบงเบ */}
                                        <TableCell sx={{ textAlign: "center" }}>
                                            <Box sx={{ display: "flex", alignItems: "center", justifyContent: "center", gap: 0.5 }}>
                                                <PriceChangeIcon fontSize="small" color="primary" />
                                                <Typography
                                                    sx={{
                                                        fontFamily: "Noto Sans Lao, sans-serif",
                                                        fontSize: "1rem",
                                                        fontWeight: "bold",
                                                        color: "#079578"
                                                    }}
                                                >
                                                    {formatLaoKip(item.price || 0)}
                                                </Typography>
                                            </Box>
                                        </TableCell>

                                        {/* เบเบณเบเบงเบ */}
                                        <TableCell sx={{ textAlign: "center" }}>
                                            <Box sx={{ display: "flex", alignItems: "center", justifyContent: "center" }}>
                                                <IconButton
                                                    size="small"
                                                    onClick={() => updateQuantity(item.id, item.quantity - 1)}
                                                    sx={{
                                                        bgcolor: "#f5f5f5",
                                                        "&:hover": { bgcolor: "#e0e0e0" },
                                                        mr: 1
                                                    }}
                                                >
                                                    <RemoveIcon />
                                                </IconButton>

                                                <Typography
                                                    sx={{
                                                        mx: 2,
                                                        fontFamily: "Noto Sans Lao, sans-serif",
                                                        fontSize: "1.2rem",
                                                        fontWeight: "bold",
                                                        minWidth: "30px",
                                                        textAlign: "center",
                                                    }}
                                                >
                                                    {item.quantity}
                                                </Typography>

                                                <IconButton
                                                    size="small"
                                                    onClick={() => updateQuantity(item.id, item.quantity + 1)}
                                                    sx={{
                                                        bgcolor: "#079578",
                                                        color: "white",
                                                        "&:hover": { bgcolor: "#046c56" },
                                                        ml: 1
                                                    }}
                                                >
                                                    <AddIcon />
                                                </IconButton>
                                            </Box>
                                        </TableCell>

                                        {/* เบซเบปเบงเปเปเบงเบ */}
                                        <TableCell
                                            sx={{
                                                fontFamily: "Noto Sans Lao, sans-serif",
                                                fontSize: "1rem"
                                            }}
                                        >
                                            {item.unit}
                                        </TableCell>

                                        {/* เบเบนเปเบชเบฐเปเบญเบ */}
                                        <TableCell>
                                            <Box sx={{ display: "flex", alignItems: "center", gap: 0.5 }}>
                                                <BusinessIcon fontSize="small" color="action" />
                                                <Typography
                                                    sx={{
                                                        fontFamily: "Noto Sans Lao, sans-serif",
                                                        fontSize: "0.9rem"
                                                    }}
                                                >
                                                    {item.supplier || "เบเปเปเบฅเบฐเบเบธเบเบนเปเบชเบฐเปเบญเบ"}
                                                </Typography>
                                            </Box>
                                        </TableCell>

                                        {/* เบฅเบฒเบเบฒเบฅเบงเบก */}
                                        <TableCell sx={{ textAlign: "center" }}>
                                            <Box sx={{ display: "flex", alignItems: "center", justifyContent: "center", gap: 0.5 }}>
                                                <CalculateIcon fontSize="small" color="secondary" />
                                                <Typography
                                                    sx={{
                                                        fontFamily: "Noto Sans Lao, sans-serif",
                                                        fontSize: "1rem",
                                                        fontWeight: "bold",
                                                        color: "#d32f2f"
                                                    }}
                                                >
                                                    {formatLaoKip(calculateItemTotal(item.price, item.quantity))}
                                                </Typography>
                                            </Box>
                                        </TableCell>

                                        {/* เบเบฑเบเบเบฒเบ */}
                                        <TableCell sx={{ textAlign: "center" }}>
                                            <Box sx={{ display: "flex", gap: 1, justifyContent: "center" }}>
                                                <Button
                                                    variant="contained"
                                                    onClick={() => removeItem(item.id)}
                                                    startIcon={<DeleteIcon />}
                                                    sx={{
                                                        bgcolor: "#f44336",
                                                        color: "white",
                                                        "&:hover": {
                                                            bgcolor: "#d32f2f",
                                                        },
                                                        fontFamily: "Noto Sans Lao, sans-serif",
                                                        fontSize: "0.8rem",
                                                        px: 2,
                                                        py: 0.5
                                                    }}
                                                >
                                                    เบฅเบปเบเบญเบญเบ
                                                </Button>
                                            </Box>
                                        </TableCell>
                                    </TableRow>
                                ))}
                            </TableBody>
                        </Table>
                    </TableContainer>

                    {/* เบชเปเบงเบเบชเบฐเบซเบผเบธเบเบฅเบฒเบเบฒเบฅเบงเบกเบเบฑเบเปเบปเบ */}
                    <Box sx={{ p: 3, bgcolor: "#f8f9fa", borderTop: "1px solid #e0e0e0" }}>
                        <Divider sx={{ mb: 2 }} />
                        <Box sx={{ display: "flex", justifyContent: "space-between", alignItems: "center", mb: 2 }}>
                            <Typography
                                variant="h6"
                                sx={{
                                    fontFamily: "Noto Sans Lao, sans-serif",
                                    fontWeight: "bold",
                                    color: "#333"
                                }}
                            >
                                เบเบณเบเบงเบเบฅเบฒเบเบเบฒเบเบเบฑเบเปเบปเบ: {cartItems.length} เบฅเบฒเบเบเบฒเบ
                            </Typography>
                            <Typography
                                variant="h6"
                                sx={{
                                    fontFamily: "Noto Sans Lao, sans-serif",
                                    fontWeight: "bold",
                                    color: "#333"
                                }}
                            >
                                เบเบณเบเบงเบเบชเบดเบเบเปเบฒเบฅเบงเบก: {getTotalItems()} เบเบดเปเบ
                            </Typography>
                        </Box>
                        <Box sx={{ display: "flex", justifyContent: "flex-end", mb: 2 }}>
                            <Box
                                sx={{
                                    bgcolor: "#079578",
                                    color: "white",
                                    p: 2,
                                    borderRadius: "8px",
                                    minWidth: "200px",
                                    textAlign: "center"
                                }}
                            >
                                <Typography
                                    variant="h5"
                                    sx={{
                                        fontFamily: "Noto Sans Lao, sans-serif",
                                        fontWeight: "bold"
                                    }}
                                >
                                    เบฅเบฒเบเบฒเบฅเบงเบกเบเบฑเบเปเบปเบ
                                </Typography>
                                <Typography
                                    variant="h4"
                                    sx={{
                                        fontFamily: "Noto Sans Lao, sans-serif",
                                        fontWeight: "bold",
                                        mt: 1
                                    }}
                                >
                                    {formatLaoKip(calculateGrandTotal())}
                                </Typography>
                            </Box>
                        </Box>
                    </Box>

                    {/* เบเบธเปเบกเบเปเบฒเบเบฅเบธเปเบก */}
                    <Box
                        sx={{
                            p: 3,
                            bgcolor: "white",
                            display: "flex",
                            justifyContent: "center",
                            gap: 2,
                            borderTop: "1px solid #e0e0e0"
                        }}
                    >
                        <Button
                            variant="contained"
                            onClick={clearAllCart}
                            sx={{
                                bgcolor: "#f44336",
                                "&:hover": { bgcolor: "#d32f2f" },
                                fontFamily: "Noto Sans Lao, sans-serif",
                                px: 4,
                                py: 1.5,
                                fontSize: "1rem",
                                fontWeight: "bold"
                            }}
                        >
                            เบเบปเบเปเบฅเบตเบเบเบฒเบเบชเบฑเปเบเบเบทเป
                        </Button>

                        <Button
                            variant="outlined"
                            onClick={() => navigate("/productdata")}
                            sx={{
                                borderColor: "#999",
                                color: "#666",
                                "&:hover": {
                                    borderColor: "#666",
                                    bgcolor: "#f5f5f5"
                                },
                                fontFamily: "Noto Sans Lao, sans-serif",
                                px: 4,
                                py: 1.5,
                                fontSize: "1rem"
                            }}
                        >
                            เปเบฅเบทเบญเบเบชเบดเบเบเปเบฒเปเบเบตเปเบก
                        </Button>

                        <Button
                            variant="contained"
                            onClick={placeOrder}
                            sx={{
                                bgcolor: "#079578",
                                "&:hover": { bgcolor: "#046c56" },
                                fontFamily: "Noto Sans Lao, sans-serif",
                                px: 4,
                                py: 1.5,
                                fontSize: "1rem",
                                fontWeight: "bold"
                            }}
                        >
                            เบขเบทเบเบขเบฑเบเบเบฒเบเบชเบฑเปเบเบเบทเป
                        </Button>
                    </Box>
                </Paper>
            )}

            {/* Confirmation Dialog */}
            <Dialog
                open={confirmDialog.open}
                onClose={closeConfirmDialog}
                PaperProps={{
                    sx: { fontFamily: "Noto Sans Lao, sans-serif" },
                }}
            >
                <DialogTitle sx={{ fontFamily: "Noto Sans Lao, sans-serif" }}>
                    {confirmDialog.title}
                </DialogTitle>
                <DialogContent>
                    <Typography sx={{ fontFamily: "Noto Sans Lao, sans-serif", whiteSpace: "pre-line" }}>
                        {confirmDialog.message}
                    </Typography>
                </DialogContent>
                <DialogActions>
                    <Button
                        onClick={closeConfirmDialog}
                        sx={{ fontFamily: "Noto Sans Lao, sans-serif" }}
                    >
                        เบเบปเบเปเบฅเบตเบ
                    </Button>
                    <Button
                        onClick={confirmDialog.onConfirm}
                        variant="contained"
                        sx={{
                            bgcolor: "#079578",
                            "&:hover": { bgcolor: "#046c56" },
                            fontFamily: "Noto Sans Lao, sans-serif",
                        }}
                    >
                        เบขเบทเบเบขเบฑเบ
                    </Button>
                </DialogActions>
            </Dialog>

            {/* Notification Snackbar */}
            <Snackbar
                open={notification.open}
                autoHideDuration={3000}
                onClose={closeNotification}
                anchorOrigin={{ vertical: "bottom", horizontal: "right" }}
            >
                <Alert
                    onClose={closeNotification}
                    severity={notification.severity}
                    sx={{ fontFamily: "Noto Sans Lao, sans-serif" }}
                >
                    {notification.message}
                </Alert>
            </Snackbar>
        </Box>
    );
};

export default Cart;